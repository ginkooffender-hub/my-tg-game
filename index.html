<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü–ò–ö–°–ï–õ–¨–ù–ê–Ø –ü–†–û–Ø–í–ö–ê ‚ñà 90's</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–∏–∫—Å–µ–ª—å–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P|VT323&display=swap&subset=cyrillic" rel="stylesheet">
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –ü–∏–∫—Å–µ–ª—å–Ω—ã–π —Ä–µ—Å–µ—Ç */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        body {
            min-height: 100vh;
            background: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 8px;
            font-family: 'VT323', 'Press Start 2P', monospace;
        }

        /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Äî –∫–∞–∫ —Å—Ç–∞—Ä—ã–π –¥–∏—Å–ø–ª–µ–π */
        .game-container {
            max-width: 400px;
            width: 100%;
            background: #000000;
            border: 4px solid #00ff00;
            padding: 16px 12px;
            box-shadow: 0 0 0 2px #004400, 0 0 0 4px #00aa00;
            position: relative;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Å—Ç–∞—Ä–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ (—Å—Ç—Ä–æ—á–∫–∏) */
        .game-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(rgba(0, 255, 0, 0.03) 50%, rgba(0, 0, 0, 0.03) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å ‚Äî –∫–∞–∫ –≤ Brick Game */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #00ff00;
            padding: 8px 12px;
            margin-bottom: 16px;
            background: #001100;
            font-family: 'VT323', monospace;
            font-size: 18px;
            color: #00ff00;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .blink {
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω —Å –ø–ª—ë–Ω–∫–æ–π */
        .film-display {
            border: 4px solid #00ff00;
            background: #001100;
            padding: 20px 16px;
            margin-bottom: 16px;
            text-align: center;
            position: relative;
        }

        .film-strip {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-bottom: 16px;
        }

        .frame {
            width: 40px;
            height: 40px;
            background: #002200;
            border: 2px solid #00aa00;
            position: relative;
        }

        .frame.filled {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .frame.filled::after {
            content: "‚òÄ";
            color: #000000;
            font-size: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .frame.current {
            border-color: #ffff00;
            box-shadow: 0 0 15px #ffff00;
            animation: pulse 0.8s infinite;
        }

        @keyframes pulse {
            0% { border-color: #ffff00; }
            50% { border-color: #00ff00; }
            100% { border-color: #ffff00; }
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */
        .progress-bar {
            width: 100%;
            height: 20px;
            border: 2px solid #00ff00;
            background: #001100;
            margin: 12px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: #00ff00;
            transition: width 0.1s linear;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–∫–∞–∫ –Ω–∞ –∫–∞—Å—Å–æ–≤–æ–º –∞–ø–ø–∞—Ä–∞—Ç–µ) */
        .info-line {
            display: flex;
            justify-content: space-between;
            color: #00ff00;
            font-family: 'VT323', monospace;
            font-size: 20px;
            border-top: 2px solid #00aa00;
            border-bottom: 2px solid #00aa00;
            padding: 8px 0;
            margin: 12px 0;
        }

        /* –ö–Ω–æ–ø–∫–∏ (–ø–∏–∫—Å–µ–ª—å–Ω—ã–µ, –∫–∞–∫ –≤ —Ç–µ—Ç—Ä–∏—Å–µ) */
        .button-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 16px 0;
        }

        .pixel-btn {
            background: #001100;
            border: 3px solid #00ff00;
            color: #00ff00;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            padding: 16px 4px;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 0 0 0 2px #000000;
            transition: all 0.05s linear;
            line-height: 1.4;
            word-break: break-word;
        }

        .pixel-btn:active {
            background: #00ff00;
            color: #000000;
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        .pixel-btn:disabled {
            opacity: 0.3;
            border-color: #004400;
            pointer-events: none;
        }

        /* –°—á—ë—Ç—á–∏–∫ –º–æ–Ω–µ—Ç */
        .coin-display {
            background: #001100;
            border: 2px solid #00ff00;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #ffff00;
            font-family: 'VT323', monospace;
            font-size: 22px;
            margin-bottom: 8px;
        }

        /* –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π */
        .log {
            border: 2px solid #00ff00;
            background: #001100;
            padding: 8px;
            height: 70px;
            overflow-y: hidden;
            font-family: 'VT323', monospace;
            font-size: 16px;
            color: #00ff00;
            margin-top: 12px;
        }

        .log p {
            margin: 4px 0;
            line-height: 1.2;
        }

        /* –ú–∏–≥–∞—é—â–∏–π –∫—É—Ä—Å–æ—Ä */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 16px;
            background: #00ff00;
            animation: blink 1s infinite;
            margin-left: 4px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- –°—Ç–∞—Ç—É—Å-–±–∞—Ä –∫–∞–∫ –≤ Brick Game -->
        <div class="status-bar">
            <span>–ü–†–û–Ø–í–ö–ê v1.0</span>
            <span class="blink">‚ñ∂‚ñ∂ –†–ê–ë–û–¢–ê–ï–ú ‚óÄ‚óÄ</span>
            <span>2026</span>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Å–ø–ª–µ–π -->
        <div class="film-display">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: #00ff00; font-size: 14px;">
                <span>–ü–õ–Å–ù–ö–ê: <span id="filmType">ILFORD HP5</span></span>
                <span>–ö–ê–î–†: <span id="currentFrameDisplay">01</span>/36</span>
            </div>

            <!-- –ü–∏–∫—Å–µ–ª—å–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ –ø–ª—ë–Ω–∫–∏ -->
            <div class="film-strip" id="filmStrip"></div>

            <!-- –≠—Ç–∞–ø –ø—Ä–æ—Ü–µ—Å—Å–∞ -->
            <div style="color: #ffff00; font-size: 22px; margin: 10px 0; font-family: 'VT323';">
                –≠–¢–ê–ü: <span id="stageName">–ó–ê–†–Ø–î–ö–ê</span>
                <span class="cursor"></span>
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ —Ç–∞–ø–∞–º -->
            <div style="color: #00aa00; font-size: 14px; margin-top: 8px;" id="hintText">
                –¢–ê–ü–ê–ô 10 –†–ê–ó, –ß–¢–û–ë–´ –ó–ê–†–Ø–î–ò–¢–¨ –ü–õ–Å–ù–ö–£
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="info-line">
            <span>üí∞ –ö–û–ò–ù–´: <span id="coinCount">0</span></span>
            <span>‚ö° –û–ü–´–¢: <span id="expCount">0</span></span>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —Å –º–æ–Ω–µ—Ç–∞–º–∏ –∏ –±—É—Å—Ç–µ—Ä–∞–º–∏ -->
        <div class="coin-display">
            <span>ü™ô –ë–ê–õ–ê–ù–°</span>
            <span><span id="coinDisplay">0</span> MC</span>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="button-panel">
            <button class="pixel-btn" id="tapBtn">‚ñ∂ –¢–ê–ü!</button>
            <button class="pixel-btn" id="buyFilmBtn">üì∑ –ö–£–ü–ò–¢–¨ –ü–õ–Å–ù–ö–£ (50)</button>
            <button class="pixel-btn" id="boostBtn">‚ö° –ë–£–°–¢–ï–† (100)</button>
        </div>

        <!-- –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π (–∫–∞–∫ –ø–µ—á–∞—Ç–Ω–∞—è –º–∞—à–∏–Ω–∫–∞) -->
        <div class="log" id="logBox">
            <p>> –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê</p>
            <p>> –ó–ê–†–Ø–î–ò–¢–ï –ü–õ–Å–ù–ö–£</p>
        </div>

        <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è Telegram –¥–∞–Ω–Ω—ã—Ö -->
        <div id="telegram-data" style="display: none;"></div>
    </div>

    <script>
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM ==========
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        tg.enableClosingConfirmation(); // –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

        // ========== –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ ==========
        const gameState = {
            // –†–µ—Å—É—Ä—Å—ã
            coins: 0,
            exp: 0,
            
            // –ü–ª—ë–Ω–∫–∞
            filmType: 'ILFORD HP5',
            currentFrame: 1,
            maxFrames: 36,
            exposedFrames: [], // –∫–∞–∫–∏–µ –∫–∞–¥—Ä—ã —É–∂–µ "—Å–Ω—è—Ç—ã"
            
            // –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ—è–≤–∫–∏
            stage: 'loading', // loading, develop, stop, fix, wash, scan, complete
            stageProgress: 0,
            stageMax: 10, // —Å–∫–æ–ª—å–∫–æ —Ç–∞–ø–æ–≤ –Ω—É–∂–Ω–æ
            
            // –ë—É—Å—Ç–µ—Ä—ã
            boostActive: false,
            boostEndTime: 0,
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            filmsDeveloped: 0,
            totalTaps: 0,
            
            // –¢–∞–π–º–µ—Ä—ã
            lastTick: Date.now(),
            
            // –ñ–∏–≤ –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å
            isActive: true
        };

        // ========== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –≠–¢–ê–ü–û–í ==========
        const stages = {
            loading: {
                name: '–ó–ê–†–Ø–î–ö–ê',
                hint: '–¢–ê–ü–ê–ô 10 –†–ê–ó, –ß–¢–û–ë–´ –ó–ê–†–Ø–î–ò–¢–¨ –ü–õ–Å–ù–ö–£',
                maxTaps: 10,
                next: 'develop',
                coinReward: 5,
                expReward: 2
            },
            develop: {
                name: '–ü–†–û–Ø–í–ò–¢–ï–õ–¨',
                hint: '–¢–ê–ü–ê–ô –ö–ê–ñ–î–´–ï 5 –°–ï–ö, –ß–¢–û–ë–´ –í–ó–ë–ê–õ–¢–´–í–ê–¢–¨',
                maxTaps: 20,
                next: 'stop',
                coinReward: 10,
                expReward: 5
            },
            stop: {
                name: '–°–¢–û–ü-–í–ê–ù–ù–ê',
                hint: '–ë–´–°–¢–†–´–ï –¢–ê–ü–´! –£–°–ü–ï–ô –ó–ê 10 –°–ï–ö',
                maxTaps: 15,
                next: 'fix',
                coinReward: 8,
                expReward: 4
            },
            fix: {
                name: '–§–ò–ö–°–ê–ñ',
                hint: '–¢–ê–ü–ê–ô, –ü–û–ö–ê –ü–õ–Å–ù–ö–ê –ù–ï –°–¢–ê–ù–ï–¢ –ü–†–û–ó–†–ê–ß–ù–û–ô',
                maxTaps: 25,
                next: 'wash',
                coinReward: 12,
                expReward: 6
            },
            wash: {
                name: '–°–£–®–ö–ê',
                hint: '–ù–ï –¢–ê–ü–ê–ô! –ñ–î–ò 15 –°–ï–ö–£–ù–î',
                maxTaps: 0, // –Ω–µ–ª—å–∑—è —Ç–∞–ø–∞—Ç—å
                waitTime: 15000, // 15 —Å–µ–∫—É–Ω–¥
                next: 'scan',
                coinReward: 5,
                expReward: 3
            },
            scan: {
                name: '–°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï',
                hint: '–¢–ê–ü–ê–ô, –ß–¢–û–ë–´ –ü–†–û–î–í–ò–ì–ê–¢–¨ –°–ö–ê–ù–ï–†',
                maxTaps: 30,
                next: 'complete',
                coinReward: 20,
                expReward: 10
            },
            complete: {
                name: '–ì–û–¢–û–í–û!',
                hint: '–ü–õ–Å–ù–ö–ê –ü–†–û–Ø–í–õ–ï–ù–ê. –ù–û–í–ê–Ø?',
                maxTaps: 0,
                next: 'loading',
                coinReward: 0,
                expReward: 0
            }
        };

        // ========== –≠–õ–ï–ú–ï–ù–¢–´ DOM ==========
        const elements = {
            filmType: document.getElementById('filmType'),
            currentFrameDisplay: document.getElementById('currentFrameDisplay'),
            filmStrip: document.getElementById('filmStrip'),
            stageName: document.getElementById('stageName'),
            progressFill: document.getElementById('progressFill'),
            hintText: document.getElementById('hintText'),
            coinCount: document.getElementById('coinCount'),
            coinDisplay: document.getElementById('coinDisplay'),
            expCount: document.getElementById('expCount'),
            logBox: document.getElementById('logBox'),
            tapBtn: document.getElementById('tapBtn'),
            buyFilmBtn: document.getElementById('buyFilmBtn'),
            boostBtn: document.getElementById('boostBtn')
        };

        // ========== –§–£–ù–ö–¶–ò–ò –õ–û–ì–ê ==========
        function addLog(message) {
            const p = document.createElement('p');
            p.textContent = '> ' + message;
            elements.logBox.appendChild(p);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
            while (elements.logBox.children.length > 5) {
                elements.logBox.removeChild(elements.logBox.firstChild);
            }
            
            // –°–∫—Ä–æ–ª–ª –≤–Ω–∏–∑
            elements.logBox.scrollTop = elements.logBox.scrollHeight;
        }

        // ========== –û–¢–†–ò–°–û–í–ö–ê –ü–õ–Å–ù–ö–ò ==========
        function renderFilmStrip() {
            let html = '';
            const startFrame = Math.max(1, gameState.currentFrame - 2);
            const endFrame = Math.min(gameState.maxFrames, gameState.currentFrame + 2);
            
            for (let i = startFrame; i <= endFrame; i++) {
                let classes = 'frame';
                if (gameState.exposedFrames.includes(i)) {
                    classes += ' filled';
                }
                if (i === gameState.currentFrame) {
                    classes += ' current';
                }
                html += `<div class="${classes}" data-frame="${i}"></div>`;
            }
            
            elements.filmStrip.innerHTML = html;
            elements.currentFrameDisplay.textContent = String(gameState.currentFrame).padStart(2, '0');
        }

        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê ==========
        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            const stage = stages[gameState.stage];
            if (stage) {
                elements.stageName.textContent = stage.name;
                elements.hintText.textContent = stage.hint;
                
                if (stage.maxTaps > 0) {
                    const progressPercent = (gameState.stageProgress / stage.maxTaps) * 100;
                    elements.progressFill.style.width = progressPercent + '%';
                } else {
                    elements.progressFill.style.width = '0%';
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ–Ω–µ—Ç—ã –∏ –æ–ø—ã—Ç
            elements.coinCount.textContent = gameState.coins;
            elements.coinDisplay.textContent = gameState.coins;
            elements.expCount.textContent = gameState.exp;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–ª—ë–Ω–∫—É
            renderFilmStrip();
        }

        // ========== –ü–ï–†–ï–•–û–î –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –≠–¢–ê–ü–£ ==========
        function nextStage() {
            const currentStage = stages[gameState.stage];
            if (!currentStage) return;
            
            // –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
            if (currentStage.coinReward > 0) {
                gameState.coins += currentStage.coinReward;
                addLog(`+${currentStage.coinReward} MC –ó–ê –≠–¢–ê–ü`);
            }
            if (currentStage.expReward > 0) {
                gameState.exp += currentStage.expReward;
            }
            
            // –ï—Å–ª–∏ —ç—Ç–∞–ø –∑–∞–≤–µ—Ä—à—ë–Ω
            if (gameState.stage === 'complete') {
                gameState.filmsDeveloped++;
                addLog(`üéûÔ∏è –ü–õ–Å–ù–ö–ê #${gameState.filmsDeveloped} –ü–†–û–Ø–í–õ–ï–ù–ê!`);
                gameState.stage = 'loading';
                gameState.currentFrame = 1;
                gameState.exposedFrames = [];
            } else {
                gameState.stage = currentStage.next;
            }
            
            gameState.stageProgress = 0;
            
            // –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏
            if (gameState.stage === 'wash') {
                // –≠—Ç–∞–ø —Å—É—à–∫–∏ ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
                addLog('üå¨Ô∏è –°–£–®–ö–ê... –ù–ï –¢–†–û–ì–ê–ô 15 –°–ï–ö');
                setTimeout(() => {
                    if (gameState.stage === 'wash') {
                        nextStage();
                    }
                }, 15000);
            }
            
            updateUI();
        }

        // ========== –û–ë–†–ê–ë–û–¢–ö–ê –¢–ê–ü–û–í ==========
        function handleTap() {
            if (!gameState.isActive) return;
            
            const stage = stages[gameState.stage];
            if (!stage) return;
            
            gameState.totalTaps++;
            
            // –≠—Ç–∞–ø —Å—É—à–∫–∏ ‚Äî —Ç–∞–ø–∞—Ç—å –Ω–µ–ª—å–∑—è
            if (gameState.stage === 'wash') {
                addLog('‚ö†Ô∏è –ù–ï –¢–ê–ü–ê–ô! –ò–î–Å–¢ –°–£–®–ö–ê');
                return;
            }
            
            // –≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à—ë–Ω ‚Äî —Ç–∞–ø–∞–µ–º –¥–ª—è –Ω–æ–≤–æ–π –ø–ª—ë–Ω–∫–∏
            if (gameState.stage === 'complete') {
                nextStage();
                return;
            }
            
            // –û–±—ã—á–Ω—ã–π —ç—Ç–∞–ø —Å —Ç–∞–ø–∞–º–∏
            if (stage.maxTaps > 0) {
                gameState.stageProgress++;
                
                // –ë—É—Å—Ç–µ—Ä —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å
                if (gameState.boostActive) {
                    gameState.stageProgress++;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞
                if (gameState.stageProgress >= stage.maxTaps) {
                    nextStage();
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
                addLog(`üëÜ –¢–ê–ü! ${gameState.stageProgress}/${stage.maxTaps}`);
                
                // –°–ª—É—á–∞–π–Ω–æ "—Å–Ω–∏–º–∞–µ–º" –∫–∞–¥—Ä—ã –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—è–≤–∫–∏
                if (Math.random() < 0.1 && !gameState.exposedFrames.includes(gameState.currentFrame)) {
                    gameState.exposedFrames.push(gameState.currentFrame);
                    addLog(`üì∏ –ö–ê–î–† ${gameState.currentFrame} –ü–†–û–Ø–í–ò–õ–°–Ø!`);
                    
                    if (gameState.currentFrame < gameState.maxFrames) {
                        gameState.currentFrame++;
                    }
                }
            }
            
            updateUI();
        }

        // ========== –ü–û–ö–£–ü–ö–ê –ü–õ–Å–ù–ö–ò ==========
        function buyFilm() {
            if (gameState.coins < 50) {
                addLog('‚ùå –ù–ï –•–í–ê–¢–ê–ï–¢ –ú–û–ù–ï–¢');
                return;
            }
            
            gameState.coins -= 50;
            gameState.filmType = gameState.filmType === 'ILFORD HP5' ? 'KODAK PORTRA' : 'ILFORD HP5';
            addLog(`üìÄ –ö–£–ü–õ–ï–ù–ê –ü–õ–Å–ù–ö–ê: ${gameState.filmType}`);
            updateUI();
        }

        // ========== –ë–£–°–¢–ï–† ==========
        function activateBoost() {
            if (gameState.coins < 100) {
                addLog('‚ùå –ù–ï –•–í–ê–¢–ê–ï–¢ –ú–û–ù–ï–¢');
                return;
            }
            
            gameState.coins -= 100;
            gameState.boostActive = true;
            gameState.boostEndTime = Date.now() + 30000; // 30 —Å–µ–∫—É–Ω–¥
            
            addLog('‚ö° –ë–£–°–¢–ï–† –ê–ö–¢–ò–í–ò–†–û–í–ê–ù –ù–ê 30 –°–ï–ö');
            
            setTimeout(() => {
                gameState.boostActive = false;
                addLog('‚ö° –ë–£–°–¢–ï–† –ó–ê–ö–û–ù–ß–ò–õ–°–Ø');
            }, 30000);
            
            updateUI();
        }

        // ========== –ó–ê–ì–†–£–ó–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø –ò–ó TELEGRAM ==========
        function loadFromTelegram() {
            try {
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ initData
                const initData = tg.initDataUnsafe;
                if (initData && initData.user) {
                    addLog(`üëã –ü–†–ò–í–ï–¢, ${initData.user.first_name}!`);
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
                if (initData && initData.start_param) {
                    gameState.coins += 100;
                    addLog('üéÅ +100 –ú–û–ù–ï–¢ –ó–ê –†–ï–§–ï–†–ê–õ–ê!');
                }
            } catch (e) {
                console.log('Telegram data error:', e);
            }
        }

        // ========== –°–û–•–†–ê–ù–ï–ù–ò–ï –ü–†–û–ì–†–ï–°–°–ê ==========
        function saveGame() {
            try {
                const saveData = {
                    coins: gameState.coins,
                    exp: gameState.exp,
                    filmsDeveloped: gameState.filmsDeveloped,
                    totalTaps: gameState.totalTaps
                };
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram Cloud (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
                tg.sendData(JSON.stringify(saveData));
            } catch (e) {
                console.log('Save error:', e);
            }
        }

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        function initGame() {
            // –°–æ–∑–¥–∞—ë–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–∞–¥—Ä—ã
            for (let i = 1; i <= 5; i++) {
                if (Math.random() < 0.3) {
                    gameState.exposedFrames.push(i);
                }
            }
            gameState.currentFrame = Math.max(...gameState.exposedFrames, 0) + 1;
            
            loadFromTelegram();
            updateUI();
            
            addLog('üéûÔ∏è –§–û–¢–û–õ–ê–ë–û–†–ê–¢–û–†–ò–Ø 199X');
            addLog('‚ñ∂ –ó–ê–†–Ø–î–ò –ü–õ–Å–ù–ö–£');
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(saveGame, 30000);
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
            window.addEventListener('beforeunload', saveGame);
        }

        // ========== –ù–ê–ó–ù–ê–ß–ê–ï–ú –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ==========
        elements.tapBtn.addEventListener('click', handleTap);
        elements.buyFilmBtn.addEventListener('click', buyFilm);
        elements.boostBtn.addEventListener('click', activateBoost);

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
        initGame();

        // ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û: –¢–ê–ü –ü–û –í–°–ï–ú–£ –≠–ö–†–ê–ù–£ –î–õ–Ø –£–î–û–ë–°–¢–í–ê ==========
        document.querySelector('.game-container').addEventListener('click', function(e) {
            // –ï—Å–ª–∏ –∫–ª–∏–∫ –Ω–µ –ø–æ –∫–Ω–æ–ø–∫–µ ‚Äî —Å—á–∏—Ç–∞–µ–º –∫–∞–∫ —Ç–∞–ø
            if (!e.target.classList.contains('pixel-btn')) {
                handleTap();
            }
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –±—É—Å—Ç–µ—Ä–∞ (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –∫—Ä–∞—Å–∏–≤–æ)
        setInterval(() => {
            if (gameState.boostActive) {
                const timeLeft = Math.max(0, Math.ceil((gameState.boostEndTime - Date.now()) / 1000));
                document.getElementById('hintText').innerHTML = `‚ö° –ë–£–°–¢–ï–†: ${timeLeft}–°`;
            }
        }, 1000);
    </script>
</body>
</html>
