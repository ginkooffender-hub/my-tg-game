<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Money Tree</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:system-ui,Arial;
background:radial-gradient(circle at top,#1a2a44,#020617);
color:white;
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
}
.app{
width:100%;
max-width:420px;
padding:20px;
}
.card{
background:rgba(15,23,42,.8);
backdrop-filter:blur(10px);
border-radius:24px;
padding:22px;
box-shadow:0 10px 40px rgba(0,0,0,.6);
text-align:center;
}
.title{
font-size:24px;
margin-bottom:10px;
letter-spacing:.5px
}
.tree{
font-size:96px;
cursor:pointer;
user-select:none;
transition:transform .08s, filter .2s;
}
.tree:active{transform:scale(.9)}
.tree:hover{filter:brightness(1.2)}
.stats{
display:flex;
justify-content:space-between;
margin-top:16px;
font-size:18px
}
.energybar{
height:12px;
background:#1f2937;
border-radius:12px;
margin-top:10px;
overflow:hidden
}
.energy{
height:100%;
background:linear-gradient(90deg,#22c55e,#4ade80);
width:100%;
transition:width .2s
}
.coin{
position:fixed;
font-size:22px;
pointer-events:none;
animation:fall 900ms linear forwards
}
@keyframes fall{
0%{transform:translateY(-10px) scale(1);opacity:1}
100%{transform:translateY(90px) scale(.8);opacity:0}
}
.shop{
margin-top:18px;
display:grid;
grid-template-columns:1fr 1fr;
gap:10px
}
.btn{
background:#1f2937;
border:none;
border-radius:14px;
padding:10px;
color:white;
font-size:14px;
cursor:pointer
}
.btn:hover{background:#374151}
</style>
</head>
<body>
<div class="app">
<div class="card">
<div class="title">ðŸŒ³ Money Tree</div>
<div id="tree" class="tree">ðŸŒ³</div>

<div class="stats">
<div>ðŸª™ <span id="coins">0</span></div>
<div>âš¡ <span id="energyText">100</span></div>
</div>

<div class="energybar"><div id="energy" class="energy"></div></div>

<div class="shop">
<button class="btn" id="power">ðŸ’ª Tap +1</button>
<button class="btn" id="energyUpgrade">ðŸ”‹ Energy +20</button>
</div>
</div>
</div>

<script>
const tg = window.Telegram.WebApp
if(tg){
 tg.expand()
}

let coins = Number(localStorage.getItem('coins')||0)
let energy = Number(localStorage.getItem('energy')||100)
let maxEnergy = Number(localStorage.getItem('maxEnergy')||100)
let power = Number(localStorage.getItem('power')||1)

const tree=document.getElementById('tree')
const coinsEl=document.getElementById('coins')
const energyEl=document.getElementById('energy')
const energyText=document.getElementById('energyText')

function save(){
localStorage.setItem('coins',coins)
localStorage.setItem('energy',energy)
localStorage.setItem('maxEnergy',maxEnergy)
localStorage.setItem('power',power)
}

function update(){
coinsEl.textContent=Math.floor(coins)
energyText.textContent=Math.floor(energy)
energyEl.style.width=(energy/maxEnergy*100)+'%'
save()
}

function spawnCoin(x,y){
const c=document.createElement('div')
c.className='coin'
c.textContent='ðŸª™'
c.style.left=x+'px'
c.style.top=y+'px'
document.body.appendChild(c)
setTimeout(()=>c.remove(),900)
}

tree.onclick=(e)=>{
if(energy<=0) return
coins += power
energy -= 2
spawnCoin(e.clientX,e.clientY)
if(tg?.HapticFeedback) tg.HapticFeedback.impactOccurred('light')
update()
}

setInterval(()=>{
energy += .8
if(energy>maxEnergy) energy=maxEnergy
update()
},200)

// upgrades

document.getElementById('power').onclick=()=>{
let price = 50*power
if(coins>=price){
coins -= price
power += 1
update()
}
}

document.getElementById('energyUpgrade').onclick=()=>{
let price = 120
if(coins>=price){
coins -= price
maxEnergy += 20
energy = maxEnergy
update()
}
}

update()
</script>
</body>
</html>
